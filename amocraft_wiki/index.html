<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <title>База Знаний | AMOCRAFT</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --primary: #2d5a5e;
            --accent: #f5a623;
            --bg: #f4f6f8;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg);
            color: #333;
            margin: 0;
            padding: 40px;
            display: flex;
            justify-content: center;
        }

        .container {
            max-width: 1000px;
            width: 100%;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
        }

        .logo {
            font-size: 24px;
            font-weight: 900;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .files-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .file-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            text-decoration: none;
            color: #333;
            transition: all 0.3s;
            position: relative;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            border: 1px solid transparent;
        }

        .btn-delete-file {
            position: absolute;
            top: 5px;
            right: 5px;
            background: none;
            border: none;
            color: #ccc;
            font-size: 20px;
            cursor: pointer;
            z-index: 10;
            line-height: 1;
            padding: 0 5px;
        }

        .btn-delete-file:hover {
            color: #ff5e57;
        }

        .file-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            border-color: var(--accent);
        }

        .file-icon {
            font-size: 40px;
            margin-bottom: 15px;
        }

        .file-name {
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 5px;
            word-break: break-all;
        }

        .file-meta {
            font-size: 11px;
            color: #999;
        }

        /* Upload Area */
        .upload-area {
            border: 2px dashed #ccc;
            border-radius: 12px;
            padding: 40px;
            text-align: center;
            background: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 30px;
        }

        .upload-area:hover,
        .upload-area.dragover {
            border-color: var(--accent);
            background: rgba(245, 166, 35, 0.1);
        }

        .upload-text {
            color: #666;
            margin-top: 10px;
        }

        .btn-hide {
            display: none;
        }

        .btn-back {
            text-decoration: none;
            color: #666;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 5px;
        }
    </style>
</head>

<body>

    <div class="container">
        <div class="header">
            <div class="logo">
                <a href="../secret_hub.html" class="btn-back">←</a>
                <span>База Знаний</span>
            </div>
            <!-- Hidden input for file selection -->
            <input type="file" id="fileInput" class="btn-hide" multiple>
        </div>

        <!-- Droppable Upload Zone -->
        <div class="upload-area" id="dropZone" onclick="document.getElementById('fileInput').click()">
            <div style="color: #ccc;">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path
                        d="M21.2 15c.7-1.2 1-2.5 1-3.9 0-6.1-4.9-11-10.9-11-4.8 0-8.9 3-10.3 7.5-1.4.3-2.6 1.1-3.4 2.3C-3.2 11.6-3.8 14-3.8 16.5c0 3.6 2.9 6.5 6.5 6.5H21c2.5 0 4.5-2 4.5-4.5 0-1.4-.6-2.8-1.7-3.6z">
                    </path>
                    <path d="M21 15v4"></path>
                    <path d="M21 15h-4"></path>
                </svg>
            </div>
            <h3 style="margin: 10px 0;">Загрузить файл</h3>
            <p class="upload-text">Нажмите или перетащите файлы сюда (PDF, Docx, Images)</p>
        </div>

        <h3 style="color: var(--primary);">Мои файлы</h3>
        <div class="files-grid" id="fileList">
            <!-- New files will appear here -->
        </div>
    </div>

    <script>
        const fileInput = document.getElementById('fileInput');
        const fileList = document.getElementById('fileList');
        const dropZone = document.getElementById('dropZone');

        // Drag & Drop effects
        dropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone.classList.add('dragover');
        });

        dropZone.addEventListener('dragleave', () => {
            dropZone.classList.remove('dragover');
        });

        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.classList.remove('dragover');
            handleFiles(e.dataTransfer.files);
        });

        fileInput.addEventListener('change', (e) => {
            handleFiles(e.target.files);
        });

        function handleFiles(files) {
            Array.from(files).forEach(file => {
                addFileToUI(file);
            });
        }

        function addFileToUI(file) {
            // Determine icon based on type
            let icon = '<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>';

            if (file.type.includes('pdf')) icon = '<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline></svg>';
            if (file.type.includes('image')) icon = '<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>';
            if (file.type.includes('spreadsheet') || file.name.endsWith('.csv')) icon = '<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="8" y1="13" x2="16" y2="13"></line><line x1="8" y1="17" x2="16" y2="17"></line><line x1="10" y1="9" x2="8" y2="9"></line></svg>';

            // Create fake URL (works only for current session)
            const url = URL.createObjectURL(file);

            // Create Card Container
            const card = document.createElement('div');
            card.className = 'file-card';

            // Format size
            const size = (file.size / 1024 / 1024).toFixed(2) + ' MB';

            card.innerHTML = `
                <button class="btn-delete-file" onclick="this.parentElement.remove()">×</button>
                <a href="${url}" target="_blank" style="text-decoration:none; color:inherit; display:flex; flex-direction:column; align-items:center; width:100%;">
                    <div class="file-icon">${icon}</div>
                    <div class="file-name">${file.name}</div>
                    <div class="file-meta">${file.type.split('/')[1]?.toUpperCase() || 'FILE'} • ${size}</div>
                </a>
            `;

            // Insert at the beginning
            fileList.insertBefore(card, fileList.firstChild);
        }
    </script>
</body>

</html>